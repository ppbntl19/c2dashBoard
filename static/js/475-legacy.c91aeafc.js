"use strict";(self["webpackChunkc2_cms_admin"]=self["webpackChunkc2_cms_admin"]||[]).push([[475],{73028:function(t,e,a){a.d(e,{Z:function(){return h}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[a("el-form",{ref:"validateForm",attrs:{model:t.formData,rules:t.rules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"Title",prop:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),a("el-form-item",{attrs:{label:"Picture",prop:"pic"}},[a("el-upload",{attrs:{action:"","http-request":t.onUploadStart,"list-type":"picture-card","auto-upload":!0,"file-list":t.uploadFile.list,name:"upload",drag:"",limit:t.uploadFile.limit,"on-success":t.onUploadChange,"on-remove":t.onRemoveChange,"on-exceed":t.onUploadExceed,headers:t.uploadHeaders}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),a("el-form-item",{attrs:{label:"About",prop:"intro"}},[a("el-input",{model:{value:t.formData.intro,callback:function(e){t.$set(t.formData,"intro",e)},expression:"formData.intro"}})],1),a("el-form-item",{attrs:{label:"Status",prop:"status"}},[a("el-switch",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}}),t._v(" "+t._s(t.formData.status?"On":"Disable")+" ")],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",id:"editor"},on:{click:function(e){return t.submitForm("validateForm")}}},[t._v("Submit")]),a("el-button",{on:{click:function(e){return t.resetForm("validateForm")}}},[t._v("Reset")])],1)],1)],1)},r=[],o=(a(57658),a(41539),a(70135)),i=a(95334),u=(a(42325),a(51836)),s=(0,u.LP)(),l="Bearer ".concat(s),c="/banner/",p={name:"BannerCreateUpdate",components:{},filters:{},props:{type:{type:String,default:function(){return"create"}}},data:function(){return{loading:!1,querys:{id:""},formData:{id:"",name:"",url:"",pic:"",intro:"",status:!0,createdBy:this.$store.state.user.userInfo.id},rules:{name:[{required:!0,message:"Please enter Title",trigger:"blur"}],url:[{required:!0,message:"Please enter url",trigger:"blur"}],pic:[{required:!0,length:1,message:"Please upload a picture",trigger:"change"}]},categoryList:[],uploadHeaders:{Authorization:l},uploadFile:{list:[],limit:1}}},watch:{},created:function(){this.getQuery()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.loading=!0,"update"===e.type?e.putUpdate():e.postCreate()}))},resetForm:function(t){this.$refs[t].resetFields()},getQuery:function(){var t=this.$route.query||{};if(this.querys=t,"update"===this.type){if(!t.id)return void this.$router.push("list");this.getDetail()}},onUploadChange:function(t){this.formData.pic=t.path},onUploadStart:function(t){var e=this;(0,i.I)(t.file,"banner","banner").then((function(t){e.formData.pic=t.url}))},onRemoveChange:function(t){this.uploadFile.list=[],this.formData.pic=""},onUploadExceed:function(){this.$message({message:"Sorry, only one image can be uploaded",type:"error"})},postCreate:function(){var t=this;(0,o.Ue)(this.formData).then((function(){t.loading=!1,t.$message({message:"Congratulations, the operation was successful",type:"success",duration:1e3}),setTimeout((function(){t.$router.push("/home".concat(c,"list"))}),1e3)}))},putUpdate:function(){var t=this;(0,o.Vx)(this.formData).then((function(){t.loading=!1,t.$message({message:"Congratulations, the operation was successful",type:"success",duration:1e3}),setTimeout((function(){t.$router.push("/home".concat(c,"list"))}),1e3)})).finally((function(){t.loading=!1}))},getDetail:function(){var t=this;this.loading=!0,(0,o.Nm)(this.querys.id).then((function(e){t.loading=!1;var a=e.pic;a&&t.uploadFile.list.push({name:a,url:a}),t.formData=e}))}}},d=p,f=a(1001),m=(0,f.Z)(d,n,r,!1,null,null,null),h=m.exports},29475:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("create-update",{attrs:{type:t.type}})],1)},r=[],o=a(73028),i={name:"CreateAbout",components:{CreateUpdate:o.Z},data:function(){return{type:"create"}}},u=i,s=a(1001),l=(0,s.Z)(u,n,r,!1,null,null,null),c=l.exports},70135:function(t,e,a){a.d(e,{Nm:function(){return u},Od:function(){return i},Ue:function(){return s},Vx:function(){return l},mE:function(){return o}});var n=a(84471),r="/banner/";function o(t){return(0,n.Z)({url:"".concat(r),method:"get",params:t})}function i(t){return(0,n.Z)({url:"".concat(r),method:"delete",data:t})}function u(t){return(0,n.Z)({url:"".concat(r+t),method:"get"})}function s(t){return(0,n.Z)({url:"".concat(r),method:"post",data:t})}function l(t){return(0,n.Z)({url:"".concat(r+t.id),method:"put",data:t})}},95334:function(t,e,a){a.d(e,{I:function(){return i}});var n=a(50124),r=a(48534),o=(a(92222),a(41539),a(42325)),i=function(){var t=(0,r.Z)((0,n.Z)().mark((function t(e,a,r){var i,u,s;return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("upload_preset",o.nr),i.append("folder",r||"/content/articles"),i.append("tags",a||"browser_upload"),i.append("file",e),u="".concat(o.lQ,"/").concat(o.Ke,"/upload"),t.prev=6,t.next=9,fetch(u,{method:"POST",body:i});case 9:return s=t.sent,t.next=12,s.json();case 12:return t.abrupt("return",t.sent);case 15:return t.prev=15,t.t0=t["catch"](6),t.abrupt("return",console.error(t.t0));case 18:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e,a,n){return t.apply(this,arguments)}}()}}]);