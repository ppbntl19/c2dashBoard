"use strict";(self["webpackChunkc2_cms_admin"]=self["webpackChunkc2_cms_admin"]||[]).push([[834],{1672:function(t,e,r){r.d(e,{Z:function(){return d}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[r("el-form",{ref:"validateForm",attrs:{model:t.formData,rules:t.rules,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"Tag Name",prop:"name"}},[r("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:"Routing",prop:"route"}},[r("el-input",{model:{value:t.formData.route,callback:function(e){t.$set(t.formData,"route",e)},expression:"formData.route"}})],1),r("el-form-item",{attrs:{label:"Description (SEO)",prop:"description"}},[r("el-input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("validateForm")}}},[t._v("Submit")]),r("el-button",{on:{click:function(e){return t.resetForm("validateForm")}}},[t._v("Reset")])],1)],1)],1)},n=[],o=(r(7658),r(1620)),s=r(8289),i=r(1836);r(5334);(0,i.LP)();var u={name:"PostCreateUpdate",filters:{},props:{type:{type:String,default:function(){return"create"}}},data(){return{loading:!1,querys:{id:""},formData:{id:"",name:"",route:"",description:"",createdBy:this.$store.state.user.userInfo.id},rules:{name:[{required:!0,message:"Please enter a tag",trigger:"blur"},{min:1,max:40,message:"Length between 1 and 40 characters",trigger:"blur"}],route:[{required:!0,message:"Please enter a Route",trigger:"blur"},{min:1,max:100,message:"1 to 100 characters long",trigger:"blur"}],description:[{required:!1,message:"Please enter a Description",trigger:"blur"},{min:1,max:1e3,message:"1 to 1000 characters long",trigger:"blur"}]}}},watch:{},created(){this.getQuery()},methods:{submitForm(t){this.$refs[t].validate((t=>{if(!t)return!1;this.loading=!0,"update"===this.type?this.putUpdate():this.postCreate()}))},resetForm(t){this.$refs[t].resetFields()},onUploadChange(t){this.formData.pic=t.path},onChoiceTag(t){console.log("onChoiceTag",t),this.formData.parent=t},onResetTag(){this.formData.parent=[]},getQuery(){const t=this.$route.query||{};this.querys=t,"update"===this.type&&this.getDetail()},defaultTagParent(){let t=this.formData.parent||[];return t.length>0?t:["0"]},hasTag(){let t=this.formData.parent||[],e=this.formData.id;if(console.log(t,e),t.indexOf(e)>-1)return!0},postCreate(){(0,o.Ue)(this.formData).then((()=>{this.loading=!1,this.$message({message:"Congratulations, the operation was successful",type:"success",duration:1e3}),setTimeout((()=>{this.$router.push(`${s.v.routePath}list`)}),1e3)}))},putUpdate(){(0,o.Vx)(this.formData).then((()=>{this.loading=!1,this.$message({message:"Congratulations, the operation was successful",type:"success",duration:1e3}),setTimeout((()=>{this.$router.push(`${s.v.routePath}list`)}),1e3)}))},getDetail(){this.loading=!0,(0,o.Nm)(this.querys.id).then((t=>{this.loading=!1,this.formData=t}))}}},l=u,c=r(1001),m=(0,c.Z)(l,a,n,!1,null,null,null),d=m.exports},4834:function(t,e,r){r.r(e),r.d(e,{default:function(){return c}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("create-update",{attrs:{type:t.type}})],1)},n=[],o=r(1672),s={name:"UpdateAbout",components:{CreateUpdate:o.Z},data(){return{type:"update"}}},i=s,u=r(1001),l=(0,u.Z)(i,a,n,!1,null,null,null),c=l.exports},5334:function(t,e,r){r.d(e,{I:function(){return n}});var a=r(2325);const n=async(t,e,r)=>{var n=new FormData;n.append("upload_preset",a.nr),n.append("folder",r||"/content/articles"),n.append("tags",e||"browser_upload"),n.append("file",t);var o=`${a.lQ}/${a.Ke}/upload`;try{const t=await fetch(o,{method:"POST",body:n});return await t.json()}catch(s){return console.error(s)}}},1620:function(t,e,r){r.d(e,{Nm:function(){return i},Od:function(){return s},Ue:function(){return u},Vx:function(){return l},mE:function(){return o}});var a=r(4471);const n="/tags/";function o(t){return(0,a.Z)({url:`${n}`,method:"get",params:t})}function s(t){return(0,a.Z)({url:`${n}`,method:"delete",data:t})}function i(t){return(0,a.Z)({url:`${n+t}`,method:"get"})}function u(t){return(0,a.Z)({url:`${n}`,method:"post",data:t})}function l(t){return(0,a.Z)({url:`${n+t.id}`,method:"put",data:t})}},8289:function(t,e,r){r.d(e,{v:function(){return a}});const a={routePath:"/post/tag/"}}}]);